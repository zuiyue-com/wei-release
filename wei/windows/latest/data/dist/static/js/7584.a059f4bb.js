/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-10-23 18:42:13
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[7584],{97280:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var t=a(66252);const i={class:"el-card el-upload-dragger list-item"},n={class:"list-item-meta"},o={class:"list-item-meta-avatar"},u={class:"list-item-meta-content"},d={class:"card-header"},s={class:"list-item-meta-action"};function m(e,l){return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",n,[(0,t._)("div",o,[(0,t.WI)(e.$slots,"image",{},void 0,!0)]),(0,t._)("div",u,[(0,t._)("div",d,[(0,t.WI)(e.$slots,"header",{},void 0,!0)]),(0,t.WI)(e.$slots,"content",{},void 0,!0)]),(0,t._)("div",s,[(0,t.WI)(e.$slots,"action",{},void 0,!0)])])])}function c(e){e.__source="src/components/CardItem/index.vue"}var r=a(83744);const p={};"function"===typeof c&&c(p);const f=(0,r.Z)(p,[["render",m],["__scopeId","data-v-4186fb5a"]]);var w=f},92369:function(e,l,a){a.r(l),a.d(l,{default:function(){return r}});var t=a(57018),i=(a(3241),a(74367),a(66252)),n=a(2262),o=a(3577),u=a(25498),d={__name:"index",props:{modelValue:{type:[Number,String],default:0},placeholder:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,d=(0,n.iH)(parseInt(a.modelValue));function s(){const e=parseInt(d.value);isNaN(e)?d.value=defaultVal:(d.value<a.min&&(d.value=a.min),d.value>a.max&&(d.value=a.max),l("update:modelValue",d.value))}(0,i.YP)((()=>a.modelValue),(()=>{d.value=parseInt(a.modelValue)}));const m=(0,i.Fl)((()=>""===d.value||(0,u.yH)(d.value)));return(l,a)=>{const u=t.EZ;return(0,i.wg)(),(0,i.j4)(u,{modelValue:(0,n.SU)(d),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.dq)(d)?d.value=e:null),modelModifiers:{number:!0},placeholder:e.placeholder,class:(0,o.C_)({"error-value":!(0,n.SU)(m)}),disabled:e.disabled,onChange:s},(0,i.Nv)({_:2},[l.$slots.prepend?{name:"prepend",fn:(0,i.w5)((()=>[(0,i.WI)(l.$slots,"prepend")])),key:"0"}:void 0]),1032,["modelValue","placeholder","class","disabled"])}}};function s(e){e.__source="src/components/InputNumber/index.vue"}var m=a(83744);"function"===typeof s&&s(d);const c=(0,m.Z)(d,[["__scopeId","data-v-2685ef0d"]]);var r=c},78352:function(e,l,a){a.r(l),a.d(l,{default:function(){return U}});var t=a(54717),i=(a(3241),a(50552),a(73632)),n=(a(74965),a(22040)),o=(a(99426),a(14181)),u=(a(33828),a(14132)),d=(a(50986),a(66252)),s=a(2262),m=a(3577),c=a(41208),r=a(91222),p=a(47720);const f={class:"checkpoint-container"},w=["id"];var _=(0,d.aZ)({__name:"checkpoint",setup(e){const l=(0,r.m)(),a=(0,s.iH)(!1),{basicFormTemp:_,basicOptions:v}=(0,p.Jk)(l),{setSdModel:g}=l;function h(e){g(e),a.value=!1}return(e,l)=>{const r=u.ElSelect,p=(0,d.up)("Close"),g=o.gn,U=n.Dv,S=i.dq,b=t.zd;return(0,d.wg)(),(0,d.iD)("div",f,[(0,d.Wm)(r,{modelValue:(0,s.SU)(_).sd_model_checkpoint_name,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,s.SU)(_).sd_model_checkpoint_name=e),clearable:"",placeholder:"选择模型",onClick:l[1]||(l[1]=e=>a.value=!0)},null,8,["modelValue"]),(0,d.Wm)(b,{modelValue:(0,s.SU)(a),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,s.dq)(a)?a.value=e:null),"show-close":!1,size:"60%"},{header:(0,d.w5)((({close:e,titleId:l,titleClass:a})=>[(0,d._)("h4",{id:l,class:(0,m.C_)(a)},"基础模型",10,w),(0,d.Wm)(g,{color:"red",class:"cursor-pointer",onClick:e},{default:(0,d.w5)((()=>[(0,d.Wm)(p)])),_:2},1032,["onClick"])])),default:(0,d.w5)((()=>[(0,d.Wm)(S,{gutter:16,span:"24"},{default:(0,d.w5)((()=>[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,s.SU)(v).Checkpoints,(e=>((0,d.wg)(),(0,d.j4)(U,{key:e.key,lg:4,md:4,sm:4,xl:3,xs:24},{default:(0,d.w5)((()=>[(0,d.Wm)(c["default"],{item:e,onClick:l=>h(e)},null,8,["item","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])}}});function v(e){e.__source="src/views/stablediffusion/components/checkpoint.vue"}var g=a(83744);"function"===typeof v&&v(_);const h=(0,g.Z)(_,[["__scopeId","data-v-5fcb900b"]]);var U=h},18594:function(e,l,a){a.r(l),a.d(l,{default:function(){return _}});var t=a(73632),i=(a(3241),a(74965),a(22040)),n=(a(99426),a(87692)),o=(a(45393),a(22411),a(66252)),u=a(2262),d=a(3577),s=a(92369);const m={key:0},c={key:1},r={class:"widthAndHeightInput"};var p={__name:"image_size",props:{imageSize:{type:Object,default:()=>{}},size:{type:String,default:""},width:{type:Number,default:0},height:{type:Number,default:0},imageSizeCustom:{type:Object,default:()=>{}},disabled:{type:Boolean,default:!1}},emits:["update:size","update:width","update:height"],setup(e,{emit:l}){const a=e,p=(0,u.iH)(a.size);async function f(e){l("update:width",e)}async function w(e){l("update:height",e)}function _(){const e=p.value;if("custom"===e.toLowerCase())l("update:width",a.imageSizeCustom.defaultWidth),l("update:height",a.imageSizeCustom.defaultHeight);else{const t=a.imageSize[e];l("update:width",t[0]),l("update:height",t[1])}l("update:size",e)}return(0,o.m0)((()=>{p.value=a.size})),(l,a)=>{const v=n.dn,g=n.KD,h=i.Dv,U=t.dq;return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",null,[(0,o.Wm)(g,{modelValue:(0,u.SU)(p),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,u.dq)(p)?p.value=e:null),onChange:_},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.imageSize,((e,l)=>((0,o.wg)(),(0,o.j4)(v,{key:l,label:l},{default:(0,o.w5)((()=>[2===e.length?((0,o.wg)(),(0,o.iD)("div",m,(0,d.zw)(`${e[0]} * ${e[1]}`),1)):(0,o.kq)("",!0),e.length>2?((0,o.wg)(),(0,o.iD)("div",c,"自定义")):(0,o.kq)("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])]),(0,o._)("div",r,[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)((0,u.SU)(s["default"]),{value:e.width,placeholder:"请输入生图的宽度",min:e.imageSizeCustom.minWidth,max:e.imageSizeCustom.maxWidth,disabled:e.disabled,"onUpdate:modelValue":f},{prepend:(0,o.w5)((()=>[(0,o.Uk)("宽度")])),_:1},8,["value","min","max","disabled"])])),_:1}),(0,o.Wm)(h,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)((0,u.SU)(s["default"]),{value:e.height,placeholder:"请输入生图的高度",min:e.imageSizeCustom.minHeight,max:e.imageSizeCustom.maxHeight,disabled:e.disabled,"onUpdate:modelValue":w},{prepend:(0,o.w5)((()=>[(0,o.Uk)("高度")])),_:1},8,["value","min","max","disabled"])])),_:1})])),_:1})])],64)}}};function f(e){e.__source="src/views/stablediffusion/components/image_size.vue"}"function"===typeof f&&f(p);const w=p;var _=w},29819:function(e,l,a){a.r(l),a.d(l,{default:function(){return y}});var t=a(47223),i=(a(3241),a(96624),a(35756)),n=(a(19414),a(54717)),o=(a(50552),a(73632)),u=(a(74965),a(22040)),d=(a(99426),a(14181)),s=(a(33828),a(15659)),m=(a(10444),a(57658),a(66252)),c=a(2262),r=a(3577),p=a(97280),f=a(41208),w=a(23279),_=a.n(w);const v={class:"lora-container"},g=["id"],h={key:0,class:"action"};var U=(0,m.aZ)({__name:"lora",props:{loraStyles:{type:Array,default:()=>[]},formStyles:{type:Array,default:()=>[]}},setup(e){const l=e,a=(0,m.f3)("$baseMessage"),w=(0,c.iH)(!1),U=(0,m.Fl)((()=>l.loraStyles.filter((e=>e.checked)))),S=(0,m.Fl)((()=>l.formStyles));function b(e){const l=S.value.findIndex((l=>l.key===e.key));return!(l>=0)&&(S.value.push({pic:e.pic,title:e.title,key:e.key,weight:e.weight.value,min:e.weight.min,max:e.weight.max}),!0)}function k(e){const l=S.value.findIndex((l=>l.key===e));return l>=0&&(S.value.splice(l,1),!0)}function y(e){const l=b(e);l?(w.value=!1,W()):a("该 Lora 风格已经添加","error","vab-hey-message-error")}function W(){U.value.filter((e=>e.checked=!1))}const V=_()((e=>{w.value&&(e.checked=!e.checked)}),200);function x(e){const l=k(e);l||a("删除 Lora 风格失败","error","vab-hey-message-error")}function C(){U.value.map((e=>b(e))),W(),w.value=!1}function z(){w.value=!1,W()}return(l,a)=>{const _=s.ElButton,b=(0,m.up)("Close"),k=d.gn,D=u.Dv,I=o.dq,H=n.zd,E=i.F8,A=(0,m.up)("vab-icon"),F=t.BM;return(0,m.wg)(),(0,m.iD)("div",v,[(0,m.Wm)(_,{class:"lora-button",onClick:a[0]||(a[0]=e=>w.value=!0)},{default:(0,m.w5)((()=>[(0,m.Uk)(" 添加LoRA(风格) ")])),_:1}),(0,m.Wm)(H,{modelValue:(0,c.SU)(w),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,c.dq)(w)?w.value=e:null),"show-close":!1,size:"60%"},{header:(0,m.w5)((({titleId:e,titleClass:l})=>[(0,m._)("h4",{id:e,class:(0,r.C_)(l)},"选择LoRA(风格)，可多选",10,g),(0,c.SU)(U).length>0?((0,m.wg)(),(0,m.iD)("div",h,[(0,m.Wm)(_,{type:"primary",plain:"",onClick:W},{default:(0,m.w5)((()=>[(0,m.Uk)(" 取消 ")])),_:1}),(0,m.Wm)(_,{type:"primary",onClick:C},{default:(0,m.w5)((()=>[(0,m.Uk)(" 选择 ")])),_:1})])):(0,m.kq)("",!0),(0,m.Wm)(k,{color:"red",class:"cursor-pointer",onClick:z},{default:(0,m.w5)((()=>[(0,m.Wm)(b)])),_:1})])),default:(0,m.w5)((()=>[(0,m.Wm)(I,{gutter:16,span:"24"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(e.loraStyles,(e=>((0,m.wg)(),(0,m.j4)(D,{key:e.key,lg:4,md:4,sm:4,xl:3,xs:24},{default:(0,m.w5)((()=>[(0,m.Wm)(f["default"],{item:e,zoom:"",onClick:l=>(0,c.SU)(V)(e),onDblclick:l=>y(e)},null,8,["item","onClick","onDblclick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"]),((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)((0,c.SU)(S),(e=>((0,m.wg)(),(0,m.j4)(p["default"],{key:e.title},{image:(0,m.w5)((()=>[(0,m.Wm)(E,{src:e.pic,width:"48",class:"upload-image"},null,8,["src"])])),header:(0,m.w5)((()=>[(0,m._)("span",null,(0,r.zw)(e.title),1),(0,m.Wm)(A,{icon:"delete-bin-6-line",style:{color:"var(--el-color-danger)"},onClick:l=>x(e.key)},null,8,["onClick"])])),content:(0,m.w5)((()=>[(0,m.Wm)(F,{modelValue:e.weight,"onUpdate:modelValue":l=>e.weight=l,min:e.min,max:e.max,step:.1},null,8,["modelValue","onUpdate:modelValue","min","max"])])),_:2},1024)))),128))])}}});function S(e){e.__source="src/views/stablediffusion/components/lora.vue"}var b=a(83744);"function"===typeof S&&S(U);const k=(0,b.Z)(U,[["__scopeId","data-v-61bcde84"]]);var y=k},67584:function(e,l,a){a.r(l),a.d(l,{default:function(){return C}});var t=a(47223),i=(a(3241),a(96624),a(73632)),n=(a(74965),a(22040)),o=(a(99426),a(87692)),u=(a(45393),a(22411),a(57018)),d=(a(74367),a(20129)),s=(a(69840),a(14132)),m=(a(50986),a(61715),a(10661)),c=(a(35095),a(6589),a(66252)),r=a(49963),p=a(2262),f=a(3577),w=a(78352),_=a(29819),v=a(73380),g=a(18594),h=a(92369),U=a(91222),S=a(47720);const b={class:"txt2imgFrom"},k={class:"txt2imgFrom"},y={class:"txt2imgFrom"};var W={__name:"txt2img",setup(e){const l=(0,U.m)(),{basicFormTemp:a,basicForm:W,basicOptions:V,isCustomImageSize:x}=(0,S.Jk)(l);return(e,l)=>{const U=d.nH,S=(0,c.up)("vab-icon"),C=m.Q0,z=s.BT,D=s.ElSelect,I=d.ly,H=u.EZ,E=o.dn,A=o.KD,F=n.Dv,q=i.dq,Y=t.BM;return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c._)("div",b,[(0,c.Wm)(I,{"label-position":"top","label-width":"100px"},{default:(0,c.w5)((()=>[(0,c.Wm)(U,null,{label:(0,c.w5)((()=>[(0,c._)("div",{onClick:l[0]||(l[0]=(0,r.iM)((()=>{}),["prevent"]))},"基础模型")])),default:(0,c.w5)((()=>[(0,c.Wm)((0,p.SU)(w["default"]))])),_:1}),(0,c.Wm)(U,{label:""},{default:(0,c.w5)((()=>[(0,c.Wm)((0,p.SU)(_["default"]),{"lora-styles":(0,p.SU)(V).loraStyle,"form-styles":(0,p.SU)(W).lora_styles},null,8,["lora-styles","form-styles"])])),_:1}),(0,c.Wm)(U,null,{label:(0,c.w5)((()=>[(0,c.Uk)(" VAE "),(0,c.Wm)(C,{effect:"dark",content:"VAEVAEVAEVAEVAEVAEVAEVAEVAEVAEVAEVAEVAE",placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(S,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),default:(0,c.w5)((()=>[(0,c.Wm)(D,{modelValue:(0,p.SU)(W).override_settings.sd_vae,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,p.SU)(W).override_settings.sd_vae=e),clearable:"",placeholder:"Select"},{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)((0,p.SU)(V).sdVae,((e,l)=>((0,c.wg)(),(0,c.j4)(z,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,c._)("div",k,[(0,c.Wm)(I,{"label-position":"top","label-width":"100px"},{default:(0,c.w5)((()=>[(0,c.Wm)(U,null,{label:(0,c.w5)((()=>[(0,c.Uk)(" 创意描述 "),(0,c.Wm)(C,{effect:"dark",content:"创意描述创意描述创意描述创意描述创意描述创意描述创意描述创意描述",placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(S,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),default:(0,c.w5)((()=>[(0,c.Wm)(H,{modelValue:(0,p.SU)(W).prompt_words,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,p.SU)(W).prompt_words=e),type:"textarea",rows:"3"},null,8,["modelValue"])])),_:1}),(0,c.Wm)(U,null,{label:(0,c.w5)((()=>[(0,c.Uk)(" 排除词 "),(0,c.Wm)(C,{effect:"dark",content:"排除词排除词排除词排除词排除词排除词排除词排除词排除词排除词排除词排除词排除词排除词",placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(S,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),default:(0,c.w5)((()=>[(0,c.Wm)(H,{modelValue:(0,p.SU)(W).negative_prompt_words,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,p.SU)(W).negative_prompt_words=e),type:"textarea",rows:"3"},null,8,["modelValue"])])),_:1}),(0,c.Wm)(U,{label:"添加参考图"},{default:(0,c.w5)((()=>[(0,c.Wm)((0,p.SU)(v["default"]))])),_:1})])),_:1})]),(0,c._)("div",y,[(0,c.Wm)(I,{"label-position":"top","label-width":"100px"},{default:(0,c.w5)((()=>[(0,c.Wm)(U,{label:"出图数量"},{default:(0,c.w5)((()=>[(0,c.Wm)(A,{modelValue:(0,p.SU)(W).batch_size,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,p.SU)(W).batch_size=e)},{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)((0,p.SU)(V).n_iter,(e=>((0,c.wg)(),(0,c.j4)(E,{key:e,label:e},{default:(0,c.w5)((()=>[(0,c.Uk)((0,f.zw)(e)+" 张 ",1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,c.Wm)(U,{label:"出图大小"},{default:(0,c.w5)((()=>[(0,c.Wm)((0,p.SU)(g["default"]),{size:(0,p.SU)(a).size,"onUpdate:size":l[5]||(l[5]=e=>(0,p.SU)(a).size=e),width:(0,p.SU)(W).width,"onUpdate:width":l[6]||(l[6]=e=>(0,p.SU)(W).width=e),height:(0,p.SU)(W).height,"onUpdate:height":l[7]||(l[7]=e=>(0,p.SU)(W).height=e),"image-size":(0,p.SU)(V).imageSize,"image-size-custom":(0,p.SU)(V).imageSizeCustom,disabled:!(0,p.SU)(x)},null,8,["size","width","height","image-size","image-size-custom","disabled"])])),_:1}),(0,c.Wm)(U,{label:"采样算法"},{default:(0,c.w5)((()=>[(0,c.Wm)(D,{modelValue:(0,p.SU)(W).sampler_index,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,p.SU)(W).sampler_index=e),clearable:"",placeholder:"采样算法"},{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)((0,p.SU)(V).samplerMethod,((e,l)=>((0,c.wg)(),(0,c.j4)(z,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,c.Wm)(U,{label:""},{default:(0,c.w5)((()=>[(0,c.Wm)(q,null,{default:(0,c.w5)((()=>[(0,c.Wm)(F,{span:12},{default:(0,c.w5)((()=>[(0,c.Wm)((0,p.SU)(h["default"]),{modelValue:(0,p.SU)(W).num_samples,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,p.SU)(W).num_samples=e),placeholder:"采样次数",min:(0,p.SU)(V).samplerStep.min,max:(0,p.SU)(V).samplerStep.max},{prepend:(0,c.w5)((()=>[(0,c.Uk)("采样次数")])),_:1},8,["modelValue","min","max"])])),_:1}),(0,c.Wm)(F,{span:12},{default:(0,c.w5)((()=>[(0,c.Wm)((0,p.SU)(h["default"]),{modelValue:(0,p.SU)(W).cfg_scale,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,p.SU)(W).cfg_scale=e),placeholder:"创意词相关性",min:(0,p.SU)(V).CFGScale.min,max:(0,p.SU)(V).CFGScale.max},{prepend:(0,c.w5)((()=>[(0,c.Uk)("创意词相关性")])),_:1},8,["modelValue","min","max"])])),_:1})])),_:1})])),_:1}),(0,c.Wm)(U,{label:"随机种子"},{default:(0,c.w5)((()=>[(0,c.Wm)((0,p.SU)(h["default"]),{modelValue:(0,p.SU)(W).seed,"onUpdate:modelValue":l[11]||(l[11]=e=>(0,p.SU)(W).seed=e),placeholder:"随机种子",min:-1,max:9999999999},null,8,["modelValue"])])),_:1}),(0,c.Wm)(U,{label:"Clip Skip"},{default:(0,c.w5)((()=>[(0,c.Wm)(Y,{modelValue:(0,p.SU)(W).clip_skip,"onUpdate:modelValue":l[12]||(l[12]=e=>(0,p.SU)(W).clip_skip=e),"show-input":"",min:(0,p.SU)(V).clipSkip.min,max:(0,p.SU)(V).clipSkip.max},null,8,["modelValue","min","max"])])),_:1}),(0,c.Wm)(U,{label:""},{default:(0,c.w5)((()=>[(0,c.Wm)((0,p.SU)(h["default"]),{modelValue:(0,p.SU)(W).ensd,"onUpdate:modelValue":l[13]||(l[13]=e=>(0,p.SU)(W).ensd=e),placeholder:"ENSD",min:-9999999999,max:9999999999},{prepend:(0,c.w5)((()=>[(0,c.Uk)("ENSD")])),_:1},8,["modelValue"])])),_:1})])),_:1})])],64)}}};function V(e){e.__source="src/views/stablediffusion/components/txt2img.vue"}"function"===typeof V&&V(W);const x=W;var C=x},73380:function(e,l,a){a.r(l),a.d(l,{default:function(){return U}});var t=a(4350),i=(a(3241),a(91103),a(35756)),n=(a(19414),a(79329)),o=(a(68984),a(66252)),u=a(2262),d=a(49963),s=a(3577),m=a(91222),c=a(97280),r=a(15592),p=a(95244),f=a(47720);const w=(0,o._)("div",{class:"el-upload__text"},[(0,o.Uk)(" 把图片拖放到这里 / "),(0,o._)("em",null,"点击这里上传")],-1),_={key:0,class:"width-100"};var v={__name:"upload",setup(e){const l=(0,m.m)(),{basicFormTemp:a,basicForm:v,hasUploadedImage:g}=(0,f.Jk)(l),{setUploadImage:h}=l,U=(0,u.iH)(null),S=(0,u.iH)([]),b=(0,o.Fl)((()=>S.value.length));(0,o.YP)(b,(async()=>{S.value.map((async e=>{const{width:l,height:a,src:t}=await(0,r.I)(e.raw),i={url:t,picid:0,uid:e.uid,percent:0,title:`图片大小 ${l}x${a}`};e.meta=i,h([i])}))}));let k=null;function y(){k&&k.abort(),U.value.clearFiles(),h([])}async function W(e,l){if(!e.msg)return U.value.clearFiles(),void h([]);const{body:{picid:a,url:t},msg:i}=e,{width:n,height:o}=await(0,r.I)(l.raw),u={url:t,picid:a,uid:l.uid,percent:100,title:l.meta.title??""};h([u])}async function V(e){return k=new AbortController,(0,p.Ix)(e,{signal:k.signal})}return(e,l)=>{const a=n.LW,m=i.F8,r=(0,o.up)("vab-icon"),p=t.t;return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.wy)((0,o.Wm)(a,{ref_key:"uploadRef",ref:U,"file-list":(0,u.SU)(S),"onUpdate:fileList":l[0]||(l[0]=e=>(0,u.dq)(S)?S.value=e:null),action:"http://localhost:15000/api/wwwapi.php?to=sd&modac=upload","on-success":W,"http-request":V,drag:"",limit:1,"auto-upload":!0,"show-file-list":!1,class:"upload-demo"},{default:(0,o.w5)((()=>[w])),_:1},8,["file-list"]),[[d.F8,!(0,u.SU)(g)]]),(0,u.SU)(g)?((0,o.wg)(),(0,o.iD)("div",_,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,u.SU)(v).init_images,(e=>((0,o.wg)(),(0,o.j4)((0,u.SU)(c["default"]),{key:e},{image:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(m,{src:e.url,width:"48",class:"upload-image"},null,8,["src"]),[[p,0===e.picid]])])),header:(0,o.w5)((()=>[(0,o._)("span",null,(0,s.zw)(e.title),1)])),action:(0,o.w5)((()=>[(0,o.Wm)(r,{icon:"delete-bin-6-line",style:{color:"var(--el-color-danger)"},onClick:y})])),_:2},1024)))),128))])):(0,o.kq)("",!0)],64)}}};function g(e){e.__source="src/views/stablediffusion/components/upload.vue"}"function"===typeof g&&g(v);const h=v;var U=h}}]);